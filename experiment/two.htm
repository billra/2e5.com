<!DOCTYPE html>
<html>
<HEAD>
<TITLE>experiment two</TITLE>
<meta charset="utf-8">
<meta name="author" content="Bill Ola Rasmussen"> 
<link rel="stylesheet" type="text/css" href="https://cdn.rawgit.com/codemirror/CodeMirror/master/lib/codemirror.css">
<link rel="stylesheet" type="text/css" href="https://cdn.rawgit.com/codemirror/CodeMirror/master/theme/mdn-like.css">
<script type="text/javascript" src="https://cdn.rawgit.com/codemirror/CodeMirror/master/lib/codemirror.js"></script>
<script type="text/javascript" src="https://cdn.rawgit.com/codemirror/CodeMirror/master/mode/javascript/javascript.js"></script>
</HEAD>
<body>

<p>experiment 2: dynamic execution of code</p>

<p>codemirror text area</p>
<textarea id="editor">document.getElementById("divTarget").innerHTML = Math.floor((Math.random() * 100) + 1);</textarea>

<button onclick="run_code();">Run</button>

<p>The calculated value is:
<span id="divTarget">(enter code and press 'run')</span>
</p>

<div id="dynamicCode">blank</div>
</body>
<script>
	var editor = CodeMirror.fromTextArea(document.getElementById("editor"), {
		lineNumbers: true,
		mode: "javascript",
		theme: "mdn-like"
	});
	function run_code() {
		editor.save();
		var code = document.getElementById("editor").value;
		document.getElementById("dynamicCode").innerHTML = ''; // clear previous children

		var script = document.createElement('script');
		script.innerHTML = code;

		document.getElementById('dynamicCode').appendChild(script);
	}
</script>
</html>
